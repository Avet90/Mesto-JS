(()=>{"use strict";function e(e){e.classList.add("active"),document.addEventListener("keydown",function(t){return r(t,e)}),e.addEventListener("click",function(t){return n(t,e)})}function t(e){e.classList.remove("active"),e.querySelector(".form").reset(),document.removeEventListener("keydown",function(t){return r(t,e)}),e.removeEventListener("click",function(t){return n(t,e)})}function r(e,r){"Escape"===e.key&&t(r)}function n(e,r){(e.target===r||e.target.classList.contains("close-btn"))&&t(r)}var o=function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),n.classList.remove(r.errorClass),n.textContent=""},i=function(e,t,r){!function(e){return e.some(function(e){return!e.validity.valid})}(e)?(t.disabled=!1,t.classList.remove(r.inactiveButtonClass)):(t.disabled=!0,t.classList.add(r.inactiveButtonClass))},c=function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);r.forEach(function(r){o(e,r,t),r.setCustomValidity("")}),n&&(n.disabled=!0,n.classList.add(t.inactiveButtonClass))},l=function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach(function(t){t.addEventListener("submit",function(e){e.preventDefault()}),function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);i(r,n,t),r.forEach(function(c){c.addEventListener("input",function(){!function(e,t,r){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?o(e,t,r):function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),o.textContent=r,o.classList.add(n.errorClass)}(e,t,t.validationMessage,r)}(e,c,t),i(r,n,t)})})}(t,e)})},u=document.querySelector(".content"),a=u.querySelector(".profile"),s=u.querySelector(".elements-container"),f=u.querySelector(".profile__add-element-button"),m=u.querySelector(".profile__edit-button"),d=u.querySelector("#popupProfile"),p=u.querySelector("#popupCard"),v=u.querySelector("#popupPicture"),y=u.querySelector("#formProfile"),S=u.querySelector("#formCard"),_={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"};function q(t){t.preventDefault();var r=p.querySelector(".place-name-input"),n=p.querySelector(".image-url-input");(function(t,r,n,o){var i=document.querySelector("#element-template").content.querySelector(".element").cloneNode(!0);i.querySelector(".element__title").textContent=r,i.querySelector(".element__image").src=t,i.querySelector(".element__image").alt=r,i.addEventListener("click",function(t){!function(t,r){t.target.closest(".element__like")&&function(e){e.target.classList.toggle("element__like_active")}(t),t.target.closest(".element__trash")&&function(e){e.target.closest(".element").remove()}(t),t.target.closest(".element__image")&&function(t,r){var n=t.target.closest(".element"),o=n.querySelector(".element__title").textContent,i=n.querySelector(".element__image").src;r.querySelector(".image-caption").textContent=o,r.querySelector(".popup-image").src=i,r.querySelector(".popup-image").alt=o,e(r)}(t,r)}(t,n)}),o.append(i)})(n.value,r.value,v,s),n.value="",r.value=""}function g(e){e.preventDefault();var t=y.querySelector(".profile-name-input").value,r=y.querySelector(".profile-description-input").value;a.querySelector(".profile__name").textContent=t,a.querySelector(".profile__description").textContent=r}u.addEventListener("keydown",function(e){!function(e){"Enter"===e.key&&(e.target===d&&g(e),e.target===p&&q())}(e)}),a.addEventListener("click",function(t){!function(t){t.target===f&&(c(S,_),e(p),l(_)),t.target===m&&(c(y,_),e(d),y.querySelector(".profile-name-input").value=a.querySelector(".profile__name").textContent,y.querySelector(".profile-description-input").value=a.querySelector(".profile__description").textContent,l(_))}(t)}),y.addEventListener("submit",function(e){g(e),t(d)}),S.addEventListener("submit",function(e){q(e),t(p)})})();